; streams example
(: sm (stream))

(stream-set-sink!
  sm
  (: (f x) (log x)))

(stream-set-source!
  sm
  (: (f) 42))

(log (os::dump))

(log 'should print 42')
(log (-> sm))
(log 'should print 39')
(<- sm 39)
